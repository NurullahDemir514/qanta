-- =====================================================
-- QANTA v2 - Test Verilerini Temizleme
-- =====================================================
-- Created: 2025-06-16
-- Purpose: Daha önce eklenen test verilerini veritabanından temizleme

BEGIN;

-- Test verilerini silme işlemi (UUID'lere göre)
-- Sıralama önemli: Foreign key kısıtlamaları nedeniyle

-- 1. Taksit detaylarını sil
DELETE FROM installment_details 
WHERE installment_transaction_id IN (
    '550e8400-e29b-41d4-a716-446655440300',
    '550e8400-e29b-41d4-a716-446655440301',
    '550e8400-e29b-41d4-a716-446655440302'
);

-- 2. Taksitli işlemleri sil
DELETE FROM installment_transactions 
WHERE id IN (
    '550e8400-e29b-41d4-a716-446655440300',
    '550e8400-e29b-41d4-a716-446655440301',
    '550e8400-e29b-41d4-a716-446655440302'
);

-- 3. Tüm test işlemlerini sil
DELETE FROM transactions 
WHERE id IN (
    -- Gelir işlemleri
    '550e8400-e29b-41d4-a716-446655440100', '550e8400-e29b-41d4-a716-446655440101',
    '550e8400-e29b-41d4-a716-446655440102', '550e8400-e29b-41d4-a716-446655440103',
    '550e8400-e29b-41d4-a716-446655440104',
    -- Gider işlemleri
    '550e8400-e29b-41d4-a716-446655440200', '550e8400-e29b-41d4-a716-446655440201',
    '550e8400-e29b-41d4-a716-446655440202', '550e8400-e29b-41d4-a716-446655440203',
    '550e8400-e29b-41d4-a716-446655440204', '550e8400-e29b-41d4-a716-446655440205',
    '550e8400-e29b-41d4-a716-446655440206', '550e8400-e29b-41d4-a716-446655440207',
    '550e8400-e29b-41d4-a716-446655440208', '550e8400-e29b-41d4-a716-446655440209',
    '550e8400-e29b-41d4-a716-446655440210', '550e8400-e29b-41d4-a716-446655440211',
    '550e8400-e29b-41d4-a716-446655440212', '550e8400-e29b-41d4-a716-446655440213',
    '550e8400-e29b-41d4-a716-446655440214', '550e8400-e29b-41d4-a716-446655440215',
    '550e8400-e29b-41d4-a716-446655440216', '550e8400-e29b-41d4-a716-446655440217',
    '550e8400-e29b-41d4-a716-446655440218', '550e8400-e29b-41d4-a716-446655440219',
    '550e8400-e29b-41d4-a716-446655440220', '550e8400-e29b-41d4-a716-446655440221',
    '550e8400-e29b-41d4-a716-446655440222', '550e8400-e29b-41d4-a716-446655440223',
    '550e8400-e29b-41d4-a716-446655440224',
    -- Taksitli işlem transaction'ları
    '550e8400-e29b-41d4-a716-446655440400', '550e8400-e29b-41d4-a716-446655440401',
    '550e8400-e29b-41d4-a716-446655440402', '550e8400-e29b-41d4-a716-446655440403'
);

-- 4. Test kategorilerini sil
DELETE FROM categories 
WHERE id IN (
    -- Gider kategorileri
    '550e8400-e29b-41d4-a716-446655440010', '550e8400-e29b-41d4-a716-446655440011',
    '550e8400-e29b-41d4-a716-446655440012', '550e8400-e29b-41d4-a716-446655440013',
    '550e8400-e29b-41d4-a716-446655440014', '550e8400-e29b-41d4-a716-446655440015',
    '550e8400-e29b-41d4-a716-446655440016', '550e8400-e29b-41d4-a716-446655440017',
    -- Gelir kategorileri
    '550e8400-e29b-41d4-a716-446655440020', '550e8400-e29b-41d4-a716-446655440021',
    '550e8400-e29b-41d4-a716-446655440022', '550e8400-e29b-41d4-a716-446655440023'
);

-- 5. Test hesaplarını sil
DELETE FROM accounts 
WHERE id IN (
    '550e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440002',
    '550e8400-e29b-41d4-a716-446655440003', '550e8400-e29b-41d4-a716-446655440004',
    '550e8400-e29b-41d4-a716-446655440005', '550e8400-e29b-41d4-a716-446655440006',
    '550e8400-e29b-41d4-a716-446655440007'
);

COMMIT;

-- =====================================================
-- Test Verisi Temizleme Özeti:
-- =====================================================
-- ✅ Taksit detayları silindi (36 kayıt)
-- ✅ Taksitli işlemler silindi (3 kayıt)
-- ✅ Tüm test işlemleri silindi (30+ kayıt)
-- ✅ Test kategorileri silindi (12 kayıt)
-- ✅ Test hesapları silindi (7 kayıt)
-- 
-- Veritabanı temizlendi ve test verileri kaldırıldı!
-- =====================================================
